# Latest Products Query Documentation

## Query Information
- **Generated:** 2024-12-19
- **Purpose:** Lấy danh sách sản phẩm mới nhất
- **Type:** SELECT with JOIN
- **Database:** my_store

## Primary Query
```sql
SELECT 
    p.id, 
    p.name, 
    p.description, 
    p.price, 
    p.image, 
    p.category_id, 
    c.name as category_name 
FROM product p 
LEFT JOIN category c ON p.category_id = c.id 
ORDER BY p.id DESC 
LIMIT 10;
```

## Query Results
| ID | Tên Sản Phẩm | Mô Tả | Giá (VNĐ) | Danh Mục | Hình Ảnh |
|----|--------------|-------|-----------|----------|----------|
| 5 | test122 | 111 | 10,000.00 | điện thoại | 1748980843_683f546b91867_1732351198_daidien-vcally.jpg |
| 4 | test | test | 10,000.00 | xe dien | 1748980855_683f5477ee0f0_iphone.jpeg |
| 3 | dien thoai | 123 | 20,000.00 | điện thoại | 1748981394_683f5692b1016_iphone-17-pro-xmax-tmobile.jpg |
| 2 | xe điện | xe | 20,000.00 | xe dien | 1748981527_1732351198_daidien-vcally.jpg |

## Query Variations

### Lấy 5 sản phẩm mới nhất
```sql
SELECT p.*, c.name as category_name 
FROM product p 
LEFT JOIN category c ON p.category_id = c.id 
ORDER BY p.id DESC 
LIMIT 5;
```

### Sản phẩm mới nhất theo danh mục
```sql
SELECT p.*, c.name as category_name 
FROM product p 
LEFT JOIN category c ON p.category_id = c.id 
WHERE c.name = 'điện thoại'
ORDER BY p.id DESC 
LIMIT 10;
```

### Sản phẩm mới với thông tin đầy đủ
```sql
SELECT 
    p.id,
    p.name,
    p.description,
    FORMAT(p.price, 0) as formatted_price,
    CONCAT('public/uploads/products/', p.image) as image_path,
    c.name as category_name,
    CASE 
        WHEN p.price < 15000 THEN 'Giá rẻ'
        WHEN p.price < 25000 THEN 'Giá vừa'
        ELSE 'Giá cao'
    END as price_range
FROM product p 
LEFT JOIN category c ON p.category_id = c.id 
ORDER BY p.id DESC 
LIMIT 10;
```

## Performance Notes
- **Index:** Query sử dụng PRIMARY KEY trên p.id (rất nhanh)
- **JOIN:** LEFT JOIN với category (acceptable performance)
- **Sorting:** ORDER BY p.id DESC sử dụng index hiệu quả
- **Limit:** LIMIT 10 đảm bảo không trả về quá nhiều data

## Usage Examples

### PHP Implementation
```php
$query = "SELECT p.id, p.name, p.description, p.price, p.image, p.category_id, c.name as category_name 
          FROM product p 
          LEFT JOIN category c ON p.category_id = c.id 
          ORDER BY p.id DESC 
          LIMIT ?";
$stmt = $pdo->prepare($query);
$stmt->execute([10]);
$products = $stmt->fetchAll(PDO::FETCH_ASSOC);
```

### JavaScript/AJAX
```javascript
fetch('/api/products/latest?limit=10')
    .then(response => response.json())
    .then(data => {
        data.forEach(product => {
            console.log(`${product.name} - ${product.price} VNĐ`);
        });
    });
```

## Business Logic
- Sản phẩm được coi là "mới nhất" dựa trên ID (auto-increment)
- Bao gồm cả sản phẩm không có danh mục (category_id = null)
- Hiển thị giá theo format VNĐ
- Image path cần được combine với base upload directory

## Related Queries
- [Product by Category](./products_by_category.md)
- [Product Search](./product_search.md)
- [Product Statistics](./product_statistics.md)

---
*Auto-generated by MCP MariaDB Integration Rule* 